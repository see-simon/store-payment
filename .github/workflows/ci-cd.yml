name: Deploy to Elastic Beanstalk
 
 on:
   push:
     branches:
       - main
 
 jobs:
   deploy:
     runs-on: ubuntu-latest
 
     steps:
       - name: Checkout code
         uses: actions/checkout@v4
 
       - name: Setup Java
         uses: actions/setup
         with:
           java-version: '17'
 
       - name: Build with Maven
         run: mvn clean package
 
       - name: Deploy to Elastic Beanstalk
         uses: einaregilsson/beanstalk-deploy@v21
         with:
           aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}
           aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
           application_name: "Springboot-store-payment-app"
           environment_name: "Springboot-store-payment-app-env"
           version_label: ${{ github.sha }}
           deploy_package: "target/store-payment-0.0.1-SNAPSHOT.jar"
           region: "eu-north-1"
         